<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Hello_bin</title>

  <!-- keywords -->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="分簇+触摸屏精确定位Algo问题分析现代生活，触摸屏手机已是非常普及，可以说人手一只。我们只要用手指轻轻在屏幕上触碰，手机就能感应到我们的操作，并且执行相应的功能。那么，手机是怎样定位到触摸点的呢？这个就是我们今天要讨论算法所重点要模拟解决的问题。
解决的思路是：把我们手机屏幕看成一个二维坐标系，横竖分别分为X轴和Y轴，这样我们就可以通过坐标值来定位某个点。知道如何表示触摸点还不足够，我们怎样确定">
<meta property="og:type" content="article">
<meta property="og:title" content="Hello_bin">
<meta property="og:url" content="http://yoursite.com/2016/12/15/分簇+触摸屏精确定位Algo/index.html">
<meta property="og:site_name" content="Hello_bin">
<meta property="og:description" content="分簇+触摸屏精确定位Algo问题分析现代生活，触摸屏手机已是非常普及，可以说人手一只。我们只要用手指轻轻在屏幕上触碰，手机就能感应到我们的操作，并且执行相应的功能。那么，手机是怎样定位到触摸点的呢？这个就是我们今天要讨论算法所重点要模拟解决的问题。
解决的思路是：把我们手机屏幕看成一个二维坐标系，横竖分别分为X轴和Y轴，这样我们就可以通过坐标值来定位某个点。知道如何表示触摸点还不足够，我们怎样确定">
<meta property="og:image" content="http://yoursite.com/file:///C:\Users\陈锡滨\AppData\Local\Temp\ksohtml\wpsD9F8.tmp.png">
<meta property="og:image" content="http://i1.piimg.com/567571/18158d7f763f9542.png">
<meta property="og:image" content="http://yoursite.com/file:///C:\Users\陈锡滨\AppData\Local\Temp\ksohtml\wpsDA08.tmp.png">
<meta property="og:image" content="http://i1.piimg.com/567571/bebad735c60be660.png">
<meta property="og:image" content="http://yoursite.com/file:///C:\Users\陈锡滨\AppData\Local\Temp\ksohtml\wpsDA09.tmp.png">
<meta property="og:image" content="http://i1.piimg.com/567571/9b1c207732261265.png">
<meta property="og:image" content="http://i1.piimg.com/567571/0526429b2cead56b.png">
<meta property="og:updated_time" content="2016-12-15T14:11:20.849Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hello_bin">
<meta name="twitter:description" content="分簇+触摸屏精确定位Algo问题分析现代生活，触摸屏手机已是非常普及，可以说人手一只。我们只要用手指轻轻在屏幕上触碰，手机就能感应到我们的操作，并且执行相应的功能。那么，手机是怎样定位到触摸点的呢？这个就是我们今天要讨论算法所重点要模拟解决的问题。
解决的思路是：把我们手机屏幕看成一个二维坐标系，横竖分别分为X轴和Y轴，这样我们就可以通过坐标值来定位某个点。知道如何表示触摸点还不足够，我们怎样确定">
<meta name="twitter:image" content="http://yoursite.com/file:///C:\Users\陈锡滨\AppData\Local\Temp\ksohtml\wpsD9F8.tmp.png">
  
    <link rel="alternative" href="/atom.xml" title="Hello_bin" type="application/atom+xml">
  
  
    <link rel="icon" href="http://a3.qpic.cn/psb?/V12kfUms1jUtSk/cCoFA61adBk6d4v6jeHkIANgE0MpSdVNA*Mff6vdZoA!/m/dAoBAAAAAAAAnull&bo=gAJVAwAAAAAFB*A!&rf=photolist&t=5">
  
  <link rel="stylesheet" href="/css/style.css">
  
  

  <script src="//cdn.bootcss.com/require.js/2.3.2/require.min.js"></script>
  <script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>

  
</head>
<body>
  <div id="container">
    <div id="particles-js"></div>
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="http://a3.qpic.cn/psb?/V12kfUms1jUtSk/cCoFA61adBk6d4v6jeHkIANgE0MpSdVNA*Mff6vdZoA!/m/dAoBAAAAAAAAnull&amp;bo=gAJVAwAAAAAFB*A!&amp;rf=photolist&amp;t=5" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">陈锡滨</a></h1>
		</hgroup>

		
		<p class="header-subtitle">Love Algo</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/archives">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://github.com/winnerweb/hexo-theme-smackdown">smackdown</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.jianshu.com/users/083ac3156200/latest_articles">简书</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://github.com/binbinla">Github</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">广东工业大学就读本科生，软件工程专业，爱篮球，爱生活，android方向开发爱好者，对技术充满好奇。</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">陈锡滨</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="http://a3.qpic.cn/psb?/V12kfUms1jUtSk/cCoFA61adBk6d4v6jeHkIANgE0MpSdVNA*Mff6vdZoA!/m/dAoBAAAAAAAAnull&amp;bo=gAJVAwAAAAAFB*A!&amp;rf=photolist&amp;t=5" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">陈锡滨</h1>
			</hgroup>
			
			<p class="header-subtitle">Love Algo</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/archives">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-分簇+触摸屏精确定位Algo" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/12/15/分簇+触摸屏精确定位Algo/" class="article-date">
  	<time datetime="2016-12-15T13:36:39.804Z" itemprop="datePublished">2016-12-15</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="分簇-触摸屏精确定位Algo"><a href="#分簇-触摸屏精确定位Algo" class="headerlink" title="分簇+触摸屏精确定位Algo"></a><strong>分簇+触摸屏精确定位Algo</strong></h1><h2 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a><strong>问题分析</strong></h2><p>现代生活，触摸屏手机已是非常普及，可以说人手一只。我们只要用手指轻轻在屏幕上触碰，手机就能感应到我们的操作，并且执行相应的功能。那么，手机是怎样定位到触摸点的呢？这个就是我们今天要讨论算法所重点要模拟解决的问题。</p>
<p>解决的思路是：把我们手机屏幕看成一个二维坐标系，横竖分别分为X轴和Y轴，这样我们就可以通过坐标值来定位某个点。知道如何表示触摸点还不足够，我们怎样确定定位点呢？这就涉及到硬件了，每个屏幕TP上面都会有电容感应器，当你用手触摸某个地方时，那里对应的电容值便会升高。多点触摸，就会有多个地方电容值升高。</p>
<p>但问题又来了，我们触摸的地方往往是一个区域，因为我们手指有一定的宽度。所以，我们需要按电容值的高低对屏幕坐标先进行分簇，即局部最大值聚类。对np_values搜索局部极大值。如果只找到一个局部最大值，则有一个单点触摸。如果找到多个局部极大值，则有多个接触。</p>
<p>分簇完成，接下来就好办了，可以通过计算电容加权平均值得出每个分簇的精确定位。</p>
<h2 id="分簇实现"><a href="#分簇实现" class="headerlink" title="分簇实现"></a><strong>分簇实现</strong></h2><p>下面是一个屏幕电容值的模拟数据表：</p>
<p><img src="file:///C:\Users\陈锡滨\AppData\Local\Temp\ksohtml\wpsD9F8.tmp.png" alt="img"> <img src="http://i1.piimg.com/567571/18158d7f763f9542.png" alt=""></p>
<p>可以看到，表中所给电容值横轴方向、纵轴方向都有所变化，当触摸屏某个位置有触摸动作发生时，该处电容值会升高，由此可判断出，上图中有两处按压。</p>
<p> 可得到两个序列：</p>
<p>x轴序列是{0，6，137，84，9，4}，Y轴序列是{1，4，45，25，2，2，13，52，58，15，4}。</p>
<p>分簇要找的就是所给序列的突峰区间，如果用索引（坐标索引从0开始计）来表示的话，上述x轴序列有一个分簇区间[0，5]，y轴序列有两个分簇区间[0，4]和[5，10]。图示如下：</p>
<p><img src="file:///C:\Users\陈锡滨\AppData\Local\Temp\ksohtml\wpsDA08.tmp.png" alt="img"><img src="http://i1.piimg.com/567571/bebad735c60be660.png" alt=""></p>
<p><img src="file:///C:\Users\陈锡滨\AppData\Local\Temp\ksohtml\wpsDA09.tmp.png" alt="img"> <img src="http://i1.piimg.com/567571/9b1c207732261265.png" alt=""></p>
<p>最后，我们需要输出分簇结果：x轴分簇[0，5]，y轴分簇[0，4]、[5，10]。</p>
<p>分簇算法实现的难点在哪儿呢？我觉得应该是如何判断一个分簇的开始与结束。为了实现判断，我在遍历索引的时候，加上了标志变量（如果当前电容值比它的前者大的话，标志变量置1，否则置2）。然后在输出分簇的时候，我们就可以通过判断标志变量，准确输出区间。主要实现代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">printf(&quot;x方向上的增减标志位如下:\n&quot;);</div><div class="line">   for (i = 0; i &lt; x-1; i++)</div><div class="line">   &#123;</div><div class="line">       if(xx[i] &lt;= xx[i+1])</div><div class="line">       &#123;</div><div class="line">           xTag[i] = 1;</div><div class="line">       &#125;</div><div class="line">       if(xx[i] &gt;= xx[i+1])</div><div class="line">       &#123;</div><div class="line">           xTag[i] = 2;</div><div class="line">           bianjieX++;</div><div class="line">       &#125;</div><div class="line">       printf(&quot;%d&quot;, xTag[i]);</div><div class="line">   &#125;</div><div class="line">       printf(&quot;y方向上的增减标志位如下:\n&quot;);</div><div class="line">   for (j = 0; j &lt; y-1; j++)</div><div class="line">   &#123;</div><div class="line">       if(yy[j] &lt;= yy[j+1])</div><div class="line">       &#123;</div><div class="line">           yTag[j] = 1;</div><div class="line">       &#125;</div><div class="line">       //根据区间来看，前后相等的情况应该赋值为2，所以上面小于情况的=号可下可不下</div><div class="line">       if(yy[j] &gt;= yy[j+1])</div><div class="line">       &#123;</div><div class="line">           yTag[j] = 2;</div><div class="line">           bianjieY++;</div><div class="line">       &#125;</div><div class="line">       printf(&quot;%d&quot;, yTag[j]);</div><div class="line">   &#125;</div><div class="line">   //定义二维数组用于存储区间的索引</div><div class="line">   for (i = 0; i &lt; x-1; i++) &#123;</div><div class="line">    if(xTag[i] == 2 &amp;&amp; xTag[i+1] == 1) &#123;</div><div class="line">        xsection[count++][1] = i;</div><div class="line">        xsection[count][0] = i+1;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">if(xsection[count][1] == 0) &#123;</div><div class="line">    xsection[count][1] = x-1;</div><div class="line">&#125;</div><div class="line">while(i &lt; x-1) &#123;</div><div class="line">    printf(&quot;\nX方向上的分簇[%d, %d]&quot;, xsection[i][0], xsection[i][1]);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="精确定位实现"><a href="#精确定位实现" class="headerlink" title="精确定位实现"></a><strong>精确定位实现</strong></h2><p>有了分簇结果，我们就可以借用分簇结果来计算每个分簇对应的精确坐标值了。计算的过程：首先需要找到分簇区间中每个索引对应的电容值，把电容值累加到变量CapacitanceALL，然后将每个索引值*对应电容值累加到变量AddAll，最后就可通过AddAll / CapacitanceALL来计算出每个分簇的精确值location。</p>
<p>主要实现代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">while(i &lt; x-1) &#123;</div><div class="line">	    printf(&quot;\nX方向上的分簇[%d, %d]&quot;, xsection[i][0], xsection[i][1]);</div><div class="line">	    AddAll = 0.0,CapacitanceALL = 0.0;</div><div class="line">	    location = 0.0;</div><div class="line">	    //输出此段分簇区间的精确定位</div><div class="line">	    for(m = xsection[i][0];m &lt;= xsection[i][1];m++)</div><div class="line">	    &#123;</div><div class="line">	        AddAll = AddAll + xx[m] * m;</div><div class="line">	        CapacitanceALL = CapacitanceALL + xx[m];</div><div class="line">	    &#125;</div><div class="line">	    location = AddAll / CapacitanceALL;</div><div class="line">        printf(&quot;  此段分簇区间的加权精确x值是：%.3f&quot;,location);</div><div class="line">	    i++;</div><div class="line">	    if(xsection[i][0] == 0) &#123;</div><div class="line">	        break;</div><div class="line">	    &#125;</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<h2 id="算法测试"><a href="#算法测试" class="headerlink" title="算法测试"></a><strong>算法测试</strong></h2><p>测试数据用的是上面提供电容模拟表中的数值，分别输入X、Y方向上的电容值，测试结果如下：</p>
<p><img src="http://i1.piimg.com/567571/0526429b2cead56b.png" alt=""></p>
<h2 id="后言"><a href="#后言" class="headerlink" title="后言"></a><strong>后言</strong></h2><p>关于这个算法就介绍这么多了，有什么不对的地方还望多多指教，也欢迎大家关注我（<a href="http://www.jianshu.com/users/083ac3156200/latest_articles" target="_blank" rel="external">简书</a>/<a href="https://github.com/binbinla" target="_blank" rel="external">GitHub</a>）</p>
<p>谢谢观看此文。</p>
<p><strong>源代码地址​</strong><a href="http://pan.baidu.com/s/1slAOoTf" target="_blank" rel="external">http://pan.baidu.com/s/1slAOoTf</a></p>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2016/12/07/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">Hello World</div>
      <strong class="article-nav-caption">&gt;</strong>
    </a>
  
</nav>

  
</article>


<div class="share">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">分享到：</span>
		<a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
		<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>





</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">
        &copy; 2016 陈锡滨
      </div>
        <div class="footer-right">
          <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/winnerweb/hexo-Yilia-Smackdown" target="_blank">Yilia(Smackdown)</a>
        </div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="/js/main.js"></script>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js"></script>


  </div>
</body>
</html>